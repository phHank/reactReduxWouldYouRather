let users = {
  sarahedo: {
    id: 'sarahedo',
    name: 'Sarah Edo',
    avatarURL: "https://th.bing.com/th/id/OIP.rJh7DnTObnK3lO0DFLiQcgAAAA?w=150&h=150&c=7&o=5&pid=1.7",
    answers: {
      "8xf0y6ziyjabvozdd253nd": 'optionOne',
      "6ni6ok3ym7mf1p33lnez": 'optionTwo',
      "am8ehyc8byjqgar0jgpub9": 'optionTwo',
      "loxhs1bqm25b708cmbf3g": 'optionTwo'
    },
    questions: ['8xf0y6ziyjabvozdd253nd', 'am8ehyc8byjqgar0jgpub9']
  },
  tylermcginnis: {
    id: 'tylermcginnis',
    name: 'Tyler McGinnis',
    avatarURL: "data:image/jpeg;base64,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",
    answers: {
      "vthrdm985a262al8qx3do": 'optionOne',
      "xj352vofupe1dqz9emx13r": 'optionTwo',
    },
    questions: ['loxhs1bqm25b708cmbf3g', 'vthrdm985a262al8qx3do'],
  },
  johndoe: {
    id: 'johndoe',
    name: 'John Doe',
    avatarURL: "https://th.bing.com/th/id/OIP.Lr4Le7A-E27Dy8iqKkm83QAAAA?w=150&h=150&c=7&o=5&pid=1.7",
    answers: {
      "xj352vofupe1dqz9emx13r": 'optionOne',
      "vthrdm985a262al8qx3do": 'optionTwo',
      "6ni6ok3ym7mf1p33lnez": 'optionTwo'
    },
    questions: ['6ni6ok3ym7mf1p33lnez', 'xj352vofupe1dqz9emx13r'],
  }
}

let questions = {
  "8xf0y6ziyjabvozdd253nd": {
    id: '8xf0y6ziyjabvozdd253nd',
    author: 'sarahedo',
    timestamp: 1467166872634,
    optionOne: {
      votes: ['sarahedo'],
      text: 'have horrible short term memory',
    },
    optionTwo: {
      votes: [],
      text: 'have horrible long term memory'
    }
  },
  "6ni6ok3ym7mf1p33lnez": {
    id: '6ni6ok3ym7mf1p33lnez',
    author: 'johndoe',
    timestamp: 1468479767190,
    optionOne: {
      votes: [],
      text: 'become a superhero',
    },
    optionTwo: {
      votes: ['johndoe', 'sarahedo'],
      text: 'become a supervillain'
    }
  },
  "am8ehyc8byjqgar0jgpub9": {
    id: 'am8ehyc8byjqgar0jgpub9',
    author: 'sarahedo',
    timestamp: 1488579767190,
    optionOne: {
      votes: [],
      text: 'be telekinetic',
    },
    optionTwo: {
      votes: ['sarahedo'],
      text: 'be telepathic'
    }
  },
  "loxhs1bqm25b708cmbf3g": {
    id: 'loxhs1bqm25b708cmbf3g',
    author: 'tylermcginnis',
    timestamp: 1482579767190,
    optionOne: {
      votes: [],
      text: 'be a front-end developer',
    },
    optionTwo: {
      votes: ['sarahedo'],
      text: 'be a back-end developer'
    }
  },
  "vthrdm985a262al8qx3do": {
    id: 'vthrdm985a262al8qx3do',
    author: 'tylermcginnis',
    timestamp: 1489579767190,
    optionOne: {
      votes: ['tylermcginnis'],
      text: 'find $50 yourself',
    },
    optionTwo: {
      votes: ['johndoe'],
      text: 'have your best friend find $500'
    }
  },
  "xj352vofupe1dqz9emx13r": {
    id: 'xj352vofupe1dqz9emx13r',
    author: 'johndoe',
    timestamp: 1493579767190,
    optionOne: {
      votes: ['johndoe'],
      text: 'write JavaScript',
    },
    optionTwo: {
      votes: ['tylermcginnis'],
      text: 'write Swift'
    }
  },
}

function generateUID () {
  return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)
}

export function _getUsers () {
  return new Promise((res, rej) => {
    setTimeout(() => res({...users}), 1000)
  })
}

export function _getQuestions () {
  return new Promise((res, rej) => {
    setTimeout(() => res({...questions}), 1000)
  })
}

function formatQuestion ({ optionOneText, optionTwoText, author }) {
  return {
    id: generateUID(),
    timestamp: Date.now(),
    author,
    optionOne: {
      votes: [],
      text: optionOneText,
    },
    optionTwo: {
      votes: [],
      text: optionTwoText,
    }
  }
}

export function _saveQuestion (question) {
  return new Promise((res, rej) => {
    const authedUser = question.author;
    const formattedQuestion = formatQuestion(question);

    setTimeout(() => {
      questions = {
        ...questions,
        [formattedQuestion.id]: formattedQuestion
      }
      
      users = {
        ...users,
        [authedUser]: {
          ...users[authedUser],
          questions: users[authedUser].questions.concat([formattedQuestion.id])
        }
      }

      res(formattedQuestion)
    }, 1000)
  })
}

export function _saveQuestionAnswer ({ authedUser, qid, answer }) {
  return new Promise((res, rej) => {
    setTimeout(() => {
      users = {
        ...users,
        [authedUser]: {
          ...users[authedUser],
          answers: {
            ...users[authedUser].answers,
            [qid]: answer
          }
        }
      }

      questions = {
        ...questions,
        [qid]: {
          ...questions[qid],
          [answer]: {
            ...questions[qid][answer],
            votes: questions[qid][answer].votes.concat([authedUser])
          }
        }
      }

      res()
    }, 500)
  })
}

export function _saveUser ({name, username, avatarUrl}) {
  return new Promise((res, rej) => {
    setTimeout(() => {
      users = {
        ...users,
        [username]: {
          id: username, 
          name: name,
          avatarURL: avatarUrl,
          questions: [],
          answers: {}
        }
      }
      
      res(users[username])
    }, 1000)
  })
}
